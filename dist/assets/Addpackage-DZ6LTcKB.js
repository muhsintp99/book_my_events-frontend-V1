import{al as Be,am as ze,r as s,an as We,j as e,s as Fe,ar as ve,as as ne,at as Ae,z as De,ax as Te,au as X,ay as Ue,h as y,a as Ne,a9 as Re,B as l,K as je,T as c,S as u,F as be,I as ye,H as we,M as k,D as b,g as d,y as Y,o as Z,a3 as ee,d as Se,C as Ve,aV as Ee}from"./index-CXSvRfrP.js";import{a as A}from"./index-Ov-tEB_r.js";import{C as He}from"./Container-B2m5I-Gk.js";import{A as te}from"./Add-3Lf9n06z.js";import{F as ae}from"./FormControlLabel-CdvNTG3X.js";function Le(a){return ze("MuiFab",a)}const Ce=Be("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),$e=a=>{const{color:r,variant:i,classes:h,size:w}=a,x={root:["root",i,`size${ne(w)}`,r==="inherit"?"colorInherit":r]},g=Ae(x,Le,h);return{...h,...g}},Ge=Fe(De,{name:"MuiFab",slot:"Root",shouldForwardProp:a=>Te(a)||a==="classes",overridesResolver:(a,r)=>{const{ownerState:i}=a;return[r.root,r[i.variant],r[`size${ne(i.size)}`],i.color==="inherit"&&r.colorInherit,r[ne(i.size)],r[i.color]]}})(X(({theme:a})=>({...a.typography.button,minHeight:36,transition:a.transitions.create(["background-color","box-shadow","border-color"],{duration:a.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(a.vars||a).zIndex.fab,boxShadow:(a.vars||a).shadows[6],"&:active":{boxShadow:(a.vars||a).shadows[12]},color:a.vars?a.vars.palette.grey[900]:a.palette.getContrastText?.(a.palette.grey[300]),backgroundColor:(a.vars||a).palette.grey[300],"&:hover":{backgroundColor:(a.vars||a).palette.grey.A100,"@media (hover: none)":{backgroundColor:(a.vars||a).palette.grey[300]},textDecoration:"none"},[`&.${Ce.focusVisible}`]:{boxShadow:(a.vars||a).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),X(({theme:a})=>({variants:[...Object.entries(a.palette).filter(Ue(["dark","contrastText"])).map(([r])=>({props:{color:r},style:{color:(a.vars||a).palette[r].contrastText,backgroundColor:(a.vars||a).palette[r].main,"&:hover":{backgroundColor:(a.vars||a).palette[r].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[r].main}}}}))]})),X(({theme:a})=>({[`&.${Ce.disabled}`]:{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground}}))),se=s.forwardRef(function(r,i){const h=We({props:r,name:"MuiFab"}),{children:w,className:x,color:g="default",component:m="button",disabled:f=!1,disableFocusRipple:S=!1,focusVisibleClassName:C,size:v="large",variant:I="circular",...B}=h,j={...h,color:g,component:m,disabled:f,disableFocusRipple:S,size:v,variant:I},p=$e(j);return e.jsx(Ge,{className:ve(p.root,x),component:m,disabled:f,focusRipple:!S,focusVisibleClassName:ve(p.focusVisible,C),ownerState:j,ref:i,...B,classes:p,children:w})}),Ke=y(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),_e=y(e.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"})),Oe=y(e.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"})),qe=y(e.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Je=y(e.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"})),Qe=y(e.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),D="https://api.bookmyevent.ae",re=["Included Benefits:","2Ã— visibility compared to Free Plan","Dedicated profile management support","Call support + priority response","Guaranteed visibility on the first page","5 relationship calls per year","Pin two reviews at the top of your profile","Full analytics access","Multi-city listing option","Visible customer contact details for incoming leads","Maximum photo and video uploads"];function st(){const a=Ne(),{id:r}=Re(),i=!!r,[h,w]=s.useState([]),[x,g]=s.useState(""),[m,f]=s.useState(""),[S,C]=s.useState(""),[v,I]=s.useState(""),[B,j]=s.useState(365),[p,z]=s.useState(re),[oe,T]=s.useState(""),[P,W]=s.useState([]),[ie,U]=s.useState(""),[M,F]=s.useState([]),[le,N]=s.useState(""),[R,V]=s.useState(""),[E,H]=s.useState(""),[ce,L]=s.useState("MB"),[$,G]=s.useState(""),[K,_]=s.useState(""),[de,O]=s.useState(!1),[ue,q]=s.useState(!0),[pe,J]=s.useState(!1),[Xe,he]=s.useState(!1),[Q,xe]=s.useState(!1);s.useEffect(()=>{(async()=>{he(!0);try{const n=await A.get(`${D}/api/modules`);w(n.data.modules||n.data||[])}catch(n){console.error(n)}finally{he(!1)}})()},[]),s.useEffect(()=>{if(!i)return;(async()=>{try{const n=await A.get(`${D}/api/subscription/plan/${r}`);if(n.data.success){const o=n.data.plan;g(o.moduleId?._id||""),f(o.name||""),C(o.description||""),j(o.durationInDays??365),I(o.price??""),z(o.planBenefits??re),W(o.features??[]),F(o.tags??[]),V(o.maxUploads??""),H(o.maxStorage??""),L(o.storageUnit??"MB"),G(o.allowedProducts??""),_(o.allowedMembers??""),O(!!o.isPopular),q(o.isActive!==!1),J(!!o.trialAvailable)}}catch(n){console.error(n)}})()},[r,i]);const ge=()=>{const t=oe.trim();if(t){if(p.includes(t)){T("");return}z([...p,t]),T("")}},Ie=t=>{if(t==="Included Benefits:")return alert("This heading cannot be removed.");z(p.filter(n=>n!==t))},me=()=>{const t=ie.trim();if(t){if(P.includes(t)){U("");return}W([...P,t]),U("")}},Pe=t=>{W(P.filter(n=>n!==t))},fe=()=>{const t=le.trim();if(t){if(M.includes(t)){N("");return}F([...M,t]),N("")}},Me=async()=>{if(!x)return alert("Please select a module");if(!m.trim())return alert("Package name is required");if(!v||Number(v)<=0)return alert("Enter a valid price");const t={moduleId:x,name:m.trim(),description:S.trim(),price:Number(v),currency:"INR",durationInDays:Number(B),planBenefits:p,features:P,tags:M,maxUploads:R?Number(R):null,maxStorage:E?Number(E):null,storageUnit:ce||"MB",allowedProducts:$?Number($):null,allowedMembers:K?Number(K):null,isPopular:de,isActive:ue,trialAvailable:pe,planType:"yearly"};xe(!0);try{i?(await A.put(`${D}/api/subscription/plan/${r}`,t),alert("Plan updated successfully!")):(await A.post(`${D}/api/subscription/plan`,t),alert("Plan created successfully!")),a("/settings/sub/list")}catch(n){alert(n.response?.data?.message||"Error saving")}finally{xe(!1)}},ke=()=>{window.confirm("Reset all fields?")&&(g(""),f(""),C(""),I(""),j(365),z(re),W([]),F([]),V(""),H(""),L("MB"),G(""),_(""),O(!1),q(!0),J(!1))};return e.jsx(l,{sx:{bgcolor:"#f5f8ff",minHeight:"100vh",py:4},children:e.jsxs(He,{maxWidth:!1,sx:{maxWidth:1600,px:{xs:2,lg:4}},children:[e.jsx(je,{elevation:8,sx:{borderRadius:5,mb:5,overflow:"hidden"},children:e.jsxs(l,{sx:{bgcolor:"#667eea",color:"white",textAlign:"center",p:6},children:[e.jsx(c,{variant:"h3",fontWeight:"bold",children:i?"Edit Subscription Package":"Create New Subscription Package"}),e.jsx(c,{variant:"h6",sx:{opacity:.9},children:"Design powerful subscription plans with benefits & features"})]})}),e.jsx(je,{elevation:6,sx:{borderRadius:5,p:{xs:3,md:6}},children:e.jsxs(u,{spacing:6,children:[e.jsxs(l,{children:[e.jsx(c,{variant:"h5",fontWeight:700,color:"primary",children:"Select Module"}),e.jsxs(be,{fullWidth:!0,children:[e.jsx(ye,{children:"Select Module"}),e.jsxs(we,{value:x,label:"Select Module",onChange:t=>g(t.target.value),children:[e.jsx(k,{value:"",children:e.jsx("em",{children:"Select a module"})}),h.map(t=>e.jsx(k,{value:t._id,children:t.title||t.name},t._id))]})]})]}),e.jsx(b,{}),e.jsxs(l,{children:[e.jsx(c,{variant:"h5",fontWeight:700,color:"primary",children:"Basic Information"}),e.jsxs(u,{spacing:4,mt:3,children:[e.jsx(d,{label:"Package Name *",value:m,onChange:t=>f(t.target.value),fullWidth:!0}),e.jsxs(u,{direction:{xs:"column",md:"row"},spacing:3,children:[e.jsx(d,{label:"Price (INR) *",type:"number",value:v,onChange:t=>I(t.target.value),fullWidth:!0}),e.jsx(d,{label:"Duration (Days)",type:"number",value:B,onChange:t=>j(t.target.value),fullWidth:!0})]}),e.jsx(d,{multiline:!0,rows:4,label:"Description",value:S,onChange:t=>C(t.target.value),fullWidth:!0})]})]}),e.jsx(b,{}),e.jsxs(l,{children:[e.jsx(c,{variant:"h5",fontWeight:700,color:"primary",children:"Plan Benefits"}),e.jsxs(u,{direction:"row",spacing:2,mt:3,children:[e.jsx(d,{fullWidth:!0,placeholder:"Add a benefit...",value:oe,onChange:t=>T(t.target.value),onKeyDown:t=>t.key==="Enter"&&(t.preventDefault(),ge())}),e.jsx(Y,{title:"Add Benefit",children:e.jsx(se,{color:"secondary",onClick:ge,children:e.jsx(te,{})})})]}),e.jsx(l,{sx:{mt:3,display:"flex",flexWrap:"wrap",gap:1.5},children:p.map(t=>e.jsx(Z,{label:t,onDelete:()=>Ie(t),color:"secondary",size:"medium"},t))})]}),e.jsx(b,{}),e.jsxs(u,{direction:{xs:"column",lg:"row"},spacing:6,children:[e.jsxs(l,{sx:{flex:1},children:[e.jsx(c,{variant:"h5",color:"primary",fontWeight:700,gutterBottom:!0,children:"Features"}),e.jsxs(u,{direction:"row",spacing:2,mt:3,children:[e.jsx(d,{fullWidth:!0,placeholder:"Add a custom feature...",value:ie,onChange:t=>U(t.target.value),onKeyDown:t=>t.key==="Enter"&&(t.preventDefault(),me())}),e.jsx(Y,{title:"Add Feature",children:e.jsx(se,{color:"primary",onClick:me,children:e.jsx(te,{})})})]}),e.jsx(l,{sx:{mt:3,display:"flex",flexWrap:"wrap",gap:1.5},children:P.map(t=>e.jsx(Z,{label:t,onDelete:()=>Pe(t),color:"primary"},t))})]}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(c,{variant:"h5",color:"primary",fontWeight:700,gutterBottom:!0,children:"Usage Limits"}),e.jsxs(u,{spacing:3,mt:3,children:[e.jsx(d,{fullWidth:!0,label:"Max Uploads",type:"text",value:R,onChange:t=>V(t.target.value),InputProps:{startAdornment:e.jsx(Qe,{sx:{mr:1}})}}),e.jsxs(u,{direction:"row",spacing:2,children:[e.jsx(d,{fullWidth:!0,label:"Max Storage",type:"text",value:E,onChange:t=>H(t.target.value),InputProps:{startAdornment:e.jsx(Je,{sx:{mr:1}})}}),e.jsxs(be,{sx:{minWidth:120},children:[e.jsx(ye,{children:"Unit"}),e.jsxs(we,{value:ce,label:"Unit",onChange:t=>L(t.target.value),children:[e.jsx(k,{value:"MB",children:"MB"}),e.jsx(k,{value:"GB",children:"GB"}),e.jsx(k,{value:"TB",children:"TB"})]})]})]}),e.jsx(d,{fullWidth:!0,label:"Allowed Products",type:"text",value:$,onChange:t=>G(t.target.value),InputProps:{startAdornment:e.jsx(_e,{sx:{mr:1}})}}),e.jsx(d,{fullWidth:!0,label:"Team Members",type:"number",value:K,onChange:t=>_(t.target.value),InputProps:{startAdornment:e.jsx(Ke,{sx:{mr:1}})}})]})]})]}),e.jsx(b,{}),e.jsxs(l,{children:[e.jsx(c,{variant:"h5",fontWeight:700,color:"primary",children:"Tags"}),e.jsxs(u,{direction:"row",spacing:2,mt:3,children:[e.jsx(d,{fullWidth:!0,placeholder:"Add a tag...",value:le,onChange:t=>N(t.target.value),onKeyDown:t=>t.key==="Enter"&&(t.preventDefault(),fe())}),e.jsx(Y,{title:"Add Tag",children:e.jsx(se,{color:"success",onClick:fe,children:e.jsx(te,{})})})]}),e.jsx(l,{sx:{mt:3,display:"flex",flexWrap:"wrap",gap:1.5},children:M.map(t=>e.jsx(Z,{label:t,onDelete:()=>F(M.filter(n=>n!==t)),variant:"outlined",color:"success"},t))})]}),e.jsx(b,{}),e.jsxs(l,{children:[e.jsx(c,{variant:"h5",fontWeight:700,color:"primary",children:"Plan Options"}),e.jsxs(u,{direction:"row",spacing:4,mt:3,children:[e.jsx(ae,{control:e.jsx(ee,{checked:de,onChange:t=>O(t.target.checked),color:"warning"}),label:e.jsxs(c,{variant:"h6",children:[e.jsx(qe,{sx:{mr:1}})," Popular Plan"]})}),e.jsx(ae,{control:e.jsx(ee,{checked:ue,onChange:t=>q(t.target.checked)}),label:e.jsx(c,{variant:"h6",children:"Active Plan"})}),e.jsx(ae,{control:e.jsx(ee,{checked:pe,onChange:t=>J(t.target.checked),color:"success"}),label:e.jsx(c,{variant:"h6",children:"Free Trial Available"})})]})]}),e.jsx(b,{}),e.jsxs(l,{sx:{display:"flex",justifyContent:"flex-end",gap:3},children:[e.jsx(Se,{variant:"outlined",size:"large",startIcon:e.jsx(Oe,{}),onClick:ke,children:"Reset"}),e.jsx(Se,{variant:"contained",size:"large",startIcon:Q?e.jsx(Ve,{size:24}):e.jsx(Ee,{}),disabled:Q,onClick:Me,children:Q?"Saving...":i?"Update Package":"Create Package"})]})]})})]})})}export{st as default};
