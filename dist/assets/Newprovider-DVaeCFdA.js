import{a as L,r as n,j as e,B as l,T as o,K as d,D as $,o as c,a4 as V,a2 as b,g as k,b as E,C as I,N as R,Q as D,U as j,V as r,W as U,c as u,X as _,Y as B,Z as H,A as z}from"./index-CXSvRfrP.js";import{S as M}from"./Search-CWf_i7h6.js";const K=({isVerified:y})=>{const T=L(),[p,S]=n.useState(0),[t,C]=n.useState([]),[h,w]=n.useState(""),[P,f]=n.useState(!0),[x,m]=n.useState({open:!1,message:"",severity:"error"});n.useEffect(()=>{(async()=>{try{f(!0);const a=await fetch("https://api.bookmyevent.ae/api/users");if(!a.ok)throw new Error(`HTTP ${a.status}`);const N=(await a.json()).users.map((i,A)=>({id:A+1,_id:i._id,name:`${i.firstName||""} ${i.lastName||""}`.trim(),email:i.email||"N/A",phone:i.phone||i.mobile||"N/A",verified:i.isVerified||!1}));C(N)}catch(a){m({open:!0,message:a.message,severity:"error"})}finally{f(!1)}})()},[]);const g=t.filter(s=>{const a=p===0?!s.verified:s.verified,v=s.name.toLowerCase().includes(h.toLowerCase())||s.email.toLowerCase().includes(h.toLowerCase());return a&&v});return y?e.jsx(l,{p:3,display:"flex",justifyContent:"center",children:e.jsx(o,{variant:"h6",children:"Provider is verified"})}):e.jsxs(l,{p:3,bgcolor:"#f4f6f8",minHeight:"100vh",children:[e.jsxs(d,{sx:{p:3,mb:3,borderRadius:2},children:[e.jsx(o,{variant:"h5",fontWeight:600,children:"Providers List"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Manage provider stores, status & details"}),e.jsx($,{sx:{my:2}}),e.jsxs(l,{display:"flex",gap:2,flexWrap:"wrap",children:[e.jsx(c,{label:`Total: ${t.length}`,color:"primary"}),e.jsx(c,{label:`Verified: ${t.filter(s=>s.verified).length}`,color:"success"}),e.jsx(c,{label:`Pending: ${t.filter(s=>!s.verified).length}`,color:"warning"})]})]}),e.jsx(d,{sx:{borderRadius:2,mb:2},children:e.jsxs(V,{value:p,onChange:(s,a)=>S(a),children:[e.jsx(b,{label:"Pending Stores"}),e.jsx(b,{label:"Verified Stores"})]})}),e.jsx(d,{sx:{p:2,mb:2,borderRadius:2},children:e.jsx(k,{size:"small",placeholder:"Search name or email",value:h,onChange:s=>w(s.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(M,{})})}})}),e.jsx(d,{sx:{borderRadius:2},children:P?e.jsxs(l,{p:3,display:"flex",gap:2,children:[e.jsx(I,{size:22}),e.jsx(o,{children:"Loading providers..."})]}):e.jsxs(R,{children:[e.jsx(D,{children:e.jsxs(j,{children:[e.jsx(r,{children:"Sl"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Phone"}),e.jsx(r,{children:"Status"}),e.jsx(r,{align:"center",children:"Actions"})]})}),e.jsxs(U,{children:[g.map(s=>e.jsxs(j,{hover:!0,children:[e.jsx(r,{children:s.id}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.phone}),e.jsx(r,{children:e.jsx(c,{size:"small",label:s.verified?"Verified":"Pending",color:s.verified?"success":"warning"})}),e.jsxs(r,{align:"center",children:[e.jsx(u,{color:"primary",onClick:()=>T(`/makeup/AddProvider/${s._id}`),children:e.jsx(_,{})}),e.jsx(u,{color:"error",onClick:()=>alert(`Delete ${s.name}`),children:e.jsx(B,{})})]})]},s._id)),g.length===0&&e.jsx(j,{children:e.jsx(r,{colSpan:6,align:"center",children:"No providers found"})})]})]})}),e.jsx(H,{open:x.open,autoHideDuration:4e3,onClose:()=>m(s=>({...s,open:!1})),children:e.jsx(z,{severity:x.severity,variant:"filled",children:x.message})})]})};export{K as default};
