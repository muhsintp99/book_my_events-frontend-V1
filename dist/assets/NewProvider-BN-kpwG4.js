import{a as k,r as n,j as e,B as o,T as l,K as g,a4 as I,a2 as u,g as E,b as L,C as U,N as R,Q as _,U as j,V as a,W as $,k as B,o as D,c as b,X as H,Y as z,Z as F,A as W}from"./index-CgvkLXhQ.js";import{S as G}from"./Search-DS6UMqv3.js";function O({isVerified:y}){const v=k(),[p,T]=n.useState(0),[C,A]=n.useState([]),[d,S]=n.useState(""),[w,m]=n.useState(!0),[h,f]=n.useState({open:!1,message:"",severity:"error"}),P=(s,i)=>{T(i)},V=()=>({method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors"}),N=async(s,i)=>{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4);try{const c=await fetch(s,{...i,signal:t.signal});if(clearTimeout(r),!c.ok)throw new Error(`HTTP ${c.status}`);return await c.json()}finally{clearTimeout(r)}};if(n.useEffect(()=>{(async()=>{try{m(!0);const i=await N("https://api.bookmyevent.ae/api/users",V());if(Array.isArray(i.users)){const t=i.users.map((r,c)=>({id:c+1,_id:r._id,name:`${r.firstName||""} ${r.lastName||""}`.trim(),email:r.email||"N/A",role:r.role||"N/A",phone:r.phone||r.mobile||"N/A",isVerified:r.isVerified||!1,status:r.isVerified?"Verified":"Pending"}));A(t)}}catch(i){f({open:!0,message:i.message,severity:"error"})}finally{m(!1)}})()},[]),y)return e.jsx(o,{p:3,display:"flex",justifyContent:"center",children:e.jsx(l,{variant:"h6",children:"Provider is verified"})});const x=C.filter(s=>{const i=p===0?!s.isVerified:s.isVerified,t=s.name.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase());return i&&t});return e.jsxs(o,{p:3,bgcolor:"#f4f6f8",minHeight:"100vh",children:[e.jsxs(g,{sx:{p:3,mb:3,borderRadius:2},children:[e.jsx(l,{variant:"h5",fontWeight:600,children:"Providers List"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Manage providers with edit & delete options"})]}),e.jsxs(g,{sx:{borderRadius:2},children:[e.jsxs(I,{value:p,onChange:P,children:[e.jsx(u,{label:"Pending Stores"}),e.jsx(u,{label:"Verified Stores"})]}),e.jsxs(o,{p:3,children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2,children:[e.jsxs(l,{variant:"h6",children:["Stores (",x.length,")"]}),e.jsx(E,{size:"small",placeholder:"Search user or email",value:d,onChange:s=>S(s.target.value),InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(G,{})})}})]}),w?e.jsxs(o,{display:"flex",gap:2,children:[e.jsx(U,{size:22}),e.jsx(l,{children:"Loading users..."})]}):e.jsxs(R,{children:[e.jsx(_,{children:e.jsxs(j,{children:[e.jsx(a,{children:"User"}),e.jsx(a,{children:"Role"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"Phone"}),e.jsx(a,{children:"Status"}),e.jsx(a,{align:"center",children:"Actions"})]})}),e.jsxs($,{children:[x.map(s=>e.jsxs(j,{hover:!0,children:[e.jsx(a,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(B,{children:s.name.charAt(0)}),e.jsx(l,{children:s.name})]})}),e.jsx(a,{children:s.role}),e.jsx(a,{children:s.email}),e.jsx(a,{children:s.phone}),e.jsx(a,{children:e.jsx(D,{label:s.status,size:"small",color:s.isVerified?"success":"warning"})}),e.jsxs(a,{align:"center",children:[e.jsx(b,{color:"primary",onClick:()=>v(`/makeup/AddProvider/${s._id}`),children:e.jsx(H,{})}),e.jsx(b,{color:"error",onClick:()=>alert(`Delete provider: ${s.name}`),children:e.jsx(z,{})})]})]},s._id)),x.length===0&&e.jsx(j,{children:e.jsx(a,{colSpan:6,align:"center",children:"No Data Found"})})]})]})]})]}),e.jsx(F,{open:h.open,autoHideDuration:4e3,onClose:()=>f(s=>({...s,open:!1})),children:e.jsx(W,{severity:h.severity,variant:"filled",children:h.message})})]})}export{O as default};
