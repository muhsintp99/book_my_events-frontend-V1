import{u as F,a as P,r as c,j as e,A as z,G as t,B as w,T as u,g,F as x,I as j,O as f,b as D,c as E,M as C,L as y,d as L,C as W,e as B,f as O,S as R,D as T}from"./index-D781LPqD.js";import{V as M,A as V,a as J,b as G}from"./AnimateButton-BJ3vAMFu.js";import{V as H}from"./Visibility-BzxIXKM3.js";import{F as _}from"./FormControlLabel-uKwtwN_Z.js";import{C as Q}from"./Checkbox-BDigs3gy.js";const U="https://api.bookmyevent.ae/api";function $(){const n=F(),m=P(),[p,I]=c.useState(!1),[b,S]=c.useState(!0),[r,a]=c.useState(!1),[v,i]=c.useState(""),[s,k]=c.useState({firstName:"",lastName:"",email:"",password:"",phone:"",role:"admin"}),A=()=>{I(!p)},N=o=>{o.preventDefault()},l=o=>{k({...s,[o.target.name]:o.target.value})},q=async o=>{if(o.preventDefault(),i(""),a(!0),!s.firstName.trim()){i("First name is required"),a(!1);return}if(!s.lastName.trim()){i("Last name is required"),a(!1);return}if(!s.email.trim()){i("Email is required"),a(!1);return}if(!s.password.trim()){i("Password is required"),a(!1);return}if(!s.phone.trim()){i("Phone number is required"),a(!1);return}if(!["admin","superadmin"].includes(s.role)){i("Invalid role selected"),a(!1);return}try{const h=await fetch(`${U}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),d=await h.json();h.ok?(b?(localStorage.setItem("token",d.data.token),localStorage.setItem("user",JSON.stringify(d.data.user))):(sessionStorage.setItem("token",d.data.token),sessionStorage.setItem("user",JSON.stringify(d.data.user))),d.data.user.role==="superadmin"?m("/superadmin-dashboard"):m("/dashboard")):i(d.message||"Registration failed")}catch(h){console.error("Register error:",h),i("Something went wrong")}finally{a(!1)}};return e.jsxs("form",{onSubmit:q,children:[v&&e.jsx(z,{severity:"error",sx:{mb:2},children:v}),e.jsx(t,{container:!0,direction:"column",spacing:2,sx:{justifyContent:"center"},children:e.jsx(t,{container:!0,sx:{alignItems:"center",justifyContent:"center"},xs:12,children:e.jsx(w,{sx:{mb:2},children:e.jsx(u,{variant:"subtitle1",children:"Sign up with Email address"})})})}),e.jsxs(t,{container:!0,spacing:{xs:0,sm:2},children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",type:"text",value:s.firstName,onChange:l,sx:{...n.typography.customInput},disabled:r,required:!0})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Last Name",margin:"normal",name:"lastName",type:"text",value:s.lastName,onChange:l,sx:{...n.typography.customInput},disabled:r,required:!0})})]}),e.jsxs(x,{fullWidth:!0,sx:{...n.typography.customInput},children:[e.jsx(j,{htmlFor:"outlined-adornment-email-register",children:"Email Address"}),e.jsx(f,{id:"outlined-adornment-email-register",type:"email",value:s.email,onChange:l,name:"email",disabled:r,required:!0})]}),e.jsxs(x,{fullWidth:!0,sx:{...n.typography.customInput},children:[e.jsx(j,{htmlFor:"outlined-adornment-phone-register",children:"Phone"}),e.jsx(f,{id:"outlined-adornment-phone-register",type:"text",value:s.phone,onChange:l,name:"phone",disabled:r,required:!0})]}),e.jsxs(x,{fullWidth:!0,sx:{...n.typography.customInput},children:[e.jsx(j,{htmlFor:"outlined-adornment-password-register",children:"Password"}),e.jsx(f,{id:"outlined-adornment-password-register",type:p?"text":"password",value:s.password,onChange:l,name:"password",disabled:r,required:!0,endAdornment:e.jsx(D,{position:"end",children:e.jsx(E,{"aria-label":"toggle password visibility",onClick:A,onMouseDown:N,edge:"end",size:"large",disabled:r,children:p?e.jsx(H,{}):e.jsx(M,{})})})})]}),e.jsx(x,{fullWidth:!0,sx:{...n.typography.customInput},children:e.jsxs(g,{select:!0,label:"Role",name:"role",value:s.role,onChange:l,sx:{...n.typography.customInput},disabled:r,required:!0,children:[e.jsx(C,{value:"admin",children:"Admin"}),e.jsx(C,{value:"superadmin",children:"Superadmin"})]})}),e.jsx(t,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:e.jsx(t,{children:e.jsx(_,{control:e.jsx(Q,{checked:b,onChange:o=>S(o.target.checked),name:"checked",color:"primary",disabled:r}),label:e.jsxs(u,{variant:"subtitle1",children:["Agree with Â ",e.jsx(u,{variant:"subtitle1",component:y,to:"#",children:"Terms & Condition."})]})})})}),e.jsx(w,{sx:{mt:2},children:e.jsx(V,{children:e.jsx(L,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",disabled:r,startIcon:r?e.jsx(W,{size:20,color:"inherit"}):null,children:r?"Signing up...":"Sign up"})})})]})}function te(){const n=B(m=>m.breakpoints.down("md"));return e.jsx(J,{children:e.jsx(t,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(t,{size:12,children:e.jsx(t,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(t,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(G,{children:e.jsxs(t,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(t,{sx:{mb:3},children:e.jsx(y,{to:"#","aria-label":"theme logo",children:e.jsx(O,{})})}),e.jsx(t,{size:12,children:e.jsx(t,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(t,{children:e.jsxs(R,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(u,{gutterBottom:!0,variant:n?"h3":"h2",sx:{color:"secondary.main"},children:"Sign up"}),e.jsx(u,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your details to continue"})]})})})}),e.jsx(t,{size:12,children:e.jsx($,{})}),e.jsx(t,{size:12,children:e.jsx(T,{})}),e.jsx(t,{size:12,children:e.jsx(t,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(u,{component:y,to:"/login",variant:"subtitle1",sx:{textDecoration:"none"},children:"Already have an account?"})})})]})})})})})})})}export{te as default};
