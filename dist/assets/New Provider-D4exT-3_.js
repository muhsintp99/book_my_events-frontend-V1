import{a as N,r as i,j as e,B as t,T as l,K as m,a4 as I,a2 as g,g as L,b as k,C as E,N as U,Q as _,U as x,V as a,W as B,k as R,o as $,c as v,X as z,Y as D,Z as H,A as W}from"./index-D781LPqD.js";import{S as F}from"./Search-QpPOBNxK.js";function Q({isVerified:u}){const b=N(),[j,y]=i.useState(0),[C,T]=i.useState([]),[c,V]=i.useState(""),[S,f]=i.useState(!0),[o,p]=i.useState({open:!1,message:"",severity:"error"}),w=(s,n)=>{y(n)};i.useEffect(()=>{(async()=>{try{f(!0);const d=await(await fetch("https://api.bookmyevent.ae/api/users")).json();if(!Array.isArray(d.users))throw new Error("Unexpected data format");const A=d.users.filter(r=>r.role==="vendor").map((r,P)=>({id:P+1,_id:r._id,name:`${r.firstName||""} ${r.lastName||""}`,email:r.email||"N/A",phone:r.phone||r.mobile||"N/A",isVerified:r.isVerified||!1,status:r.isVerified?"Verified":"Pending"}));T(A)}catch(n){p({open:!0,message:n.message,severity:"error"})}finally{f(!1)}})()},[]);const h=C.filter(s=>{const n=j===0?!s.isVerified:s.isVerified,d=s.name.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase());return n&&d});return u?e.jsx(t,{p:3,display:"flex",justifyContent:"center",children:e.jsx(l,{variant:"h6",children:"Provider is verified"})}):e.jsxs(t,{p:3,bgcolor:"#f4f6f8",minHeight:"100vh",children:[e.jsxs(m,{sx:{p:3,mb:3,borderRadius:2},children:[e.jsx(l,{variant:"h5",fontWeight:600,children:"Vendor List"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Manage vendors with edit & delete options"})]}),e.jsxs(m,{sx:{borderRadius:2},children:[e.jsxs(I,{value:j,onChange:w,children:[e.jsx(g,{label:"Pending Vendors"}),e.jsx(g,{label:"Verified Vendors"})]}),e.jsxs(t,{p:3,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2,children:[e.jsxs(l,{variant:"h6",children:["Total: ",h.length]}),e.jsx(L,{size:"small",placeholder:"Search vendor...",value:c,onChange:s=>V(s.target.value),InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(F,{})})}})]}),S?e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(E,{size:22}),e.jsx(l,{children:"Loading vendors..."})]}):e.jsxs(U,{children:[e.jsx(_,{children:e.jsxs(x,{children:[e.jsx(a,{children:"Vendor"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"Phone"}),e.jsx(a,{children:"Status"}),e.jsx(a,{align:"center",children:"Actions"})]})}),e.jsxs(B,{children:[h.map(s=>e.jsxs(x,{hover:!0,children:[e.jsx(a,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(R,{children:s.name.charAt(0)}),e.jsx(l,{children:s.name})]})}),e.jsx(a,{children:s.email}),e.jsx(a,{children:s.phone}),e.jsx(a,{children:e.jsx($,{label:s.status,color:s.isVerified?"success":"warning",size:"small"})}),e.jsxs(a,{align:"center",children:[e.jsx(v,{color:"primary",onClick:()=>b(`/makeup/AddProvider/${s._id}`),children:e.jsx(z,{})}),e.jsx(v,{color:"error",onClick:()=>alert(`Delete vendor ${s.name}`),children:e.jsx(D,{})})]})]},s._id)),h.length===0&&e.jsx(x,{children:e.jsx(a,{colSpan:5,align:"center",children:"No vendors found"})})]})]})]})]}),e.jsx(H,{open:o.open,autoHideDuration:4e3,onClose:()=>p({...o,open:!1}),children:e.jsx(W,{severity:o.severity,variant:"filled",children:o.message})})]})}export{Q as default};
