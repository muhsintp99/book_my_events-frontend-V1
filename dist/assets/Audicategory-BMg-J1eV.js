import{r as u,a as We,j as e,B as p,S as Z,C as B,T as j,Z as ue,A as he,d as w,q as ge,m as me,a4 as ze,a2 as Re,g as _,M as I,c as ee,a6 as Fe,o as xe,b as Ue,l as Oe,a7 as fe,a8 as pe,D as Be,J as _e,K as He,N as Ye,Q as Je,U as te,V as C,W as Ve,a3 as Ge,X as qe,Y as Ke,_ as Xe,$ as Qe,a0 as Ze,a1 as et}from"./index-CgvkLXhQ.js";import{C as tt}from"./CloudUpload-CXdiHdg2.js";import{S as rt}from"./Search-DS6UMqv3.js";import{E as ot}from"./ExpandMore-hDX_ElcU.js";import{E as st}from"./FileDownload-tD0lsIHS.js";import{E as at}from"./TableView-DDvE5aaM.js";import{C as nt}from"./Description-BlVNf_SV.js";const W="https://api.bookmyevent.ae/api";function mt(){const[m,ye]=u.useState(0),[$,be]=u.useState(""),[z,H]=u.useState(null),[re,Y]=u.useState(null),[S,je]=u.useState([]),[T,J]=u.useState(!0),[b,E]=u.useState(null),[V,G]=u.useState("all"),[l,R]=u.useState({name:"",description:"",parentCategory:"",module:"",displayOrder:0,isActive:!0,isFeatured:!1,metaTitle:"",metaDescription:""}),[L,Ce]=u.useState([]),[f,v]=u.useState(!0),[k,h]=u.useState(null),[q,oe]=u.useState({open:!1,message:"",severity:"success"}),[F,U]=u.useState({open:!1,categoryId:null,categoryName:""}),[se,ae]=u.useState(null),ve=!!se,d=We(),N=u.useRef(null),x=[{key:"default",label:"Default"},{key:"english",label:"English(EN)"},{key:"arabic",label:"Arabic - العربية(AR)"}],D=()=>{const t=localStorage.getItem("token")||sessionStorage.getItem("token");return console.log("Retrieved token:",t?"Token exists":"No token found"),t},ke=()=>{const t=localStorage.getItem("user")||sessionStorage.getItem("user");if(!t)return console.log("No user data found in storage"),null;try{const r=JSON.parse(t);return console.log("User role:",r.role),r.role}catch(r){return console.error("Error parsing user data:",r),null}},ne=()=>{const t=localStorage.getItem("user")||sessionStorage.getItem("user");if(!t)return null;try{return JSON.parse(t)._id}catch(r){return console.error("Error parsing user data:",r),null}},we=(t,r)=>ye(r),K=u.useCallback(async()=>{const t=D();if(!t){E("You are not authenticated. Please log in."),J(!1);return}J(!0),E(null);try{const r=await fetch(`${W}/modules`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(r.status===401){E("Session expired. Please log in again."),d("/login");return}if(!r.ok){const o=await r.text();throw new Error(`HTTP error! status: ${r.status}: ${o}`)}const s=await r.json();console.log("Fetched modules:",s);let a=[];Array.isArray(s)?a=s:Array.isArray(s.modules)?a=s.modules:s.data&&Array.isArray(s.data.modules)?a=s.data.modules:s.data&&Array.isArray(s.data)&&(a=s.data),je(a);const c=window.location.pathname;let i=null;c.includes("/catering")?i=a.find(o=>(o.title||o.name||"").toLowerCase().includes("catering")):c.includes("/auditorium")&&(i=a.find(o=>(o.title||o.name||"").toLowerCase().includes("auditorium"))),i?(R(o=>({...o,module:i._id})),G(i._id)):a.length>0?(R(o=>({...o,module:a[0]._id})),G(a[0]._id)):E("No modules available. Please create a module first.")}catch(r){console.error("Error fetching modules:",r),E(r.message),g("Failed to fetch modules","error")}finally{J(!1)}},[d]),M=u.useCallback(async()=>{const t=D();if(!t){h("You are not authenticated. Please log in."),v(!1);return}v(!0),h(null);try{const r=`${W}/categories?limit=1000&search=${encodeURIComponent($)}`,s=await fetch(r,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(s.status===401){h("Session expired. Please log in again."),d("/login");return}if(s.status===403){h("Access denied. You don't have permission to view categories."),d("/dashboard");return}if(!s.ok){const o=await s.text();throw new Error(`HTTP error! status: ${s.status}: ${o}`)}const a=await s.json();console.log("Fetched categories:",a);let c=[];Array.isArray(a)?c=a:Array.isArray(a.categories)?c=a.categories:a.data&&Array.isArray(a.data.categories)?c=a.data.categories:a.data&&Array.isArray(a.data)&&(c=a.data);const i=c.map(o=>{let y="";return o.image&&(o.image.startsWith("http://")||o.image.startsWith("https://")?y=o.image:o.image.startsWith("/uploads")||o.image.startsWith("uploads")?y=`https://api.bookmyevent.ae${o.image.startsWith("/")?o.image:`/${o.image}`}`:y=`https://api.bookmyevent.ae/${o.image}`),{id:o._id,names:{default:o.title||o.name||"",english:o.title||o.name||"",arabic:o.title||o.name||""},status:o.isActive!==void 0?o.isActive:!0,image:y,module:o.module||null}});Ce(i)}catch(r){console.error("Error fetching categories:",r),h(r.message),g(`Failed to fetch categories: ${r.message}`,"error")}finally{v(!1)}},[$,d]);u.useEffect(()=>{const t=ke(),r=D();if(console.log("Initial check - Token:",r?"Exists":"Missing","Role:",t),!r){console.log("No token found - showing error but staying on page"),h("You are not authenticated. Please log in."),v(!1);return}if(!["admin","manager","superadmin"].includes(t)){console.log("Insufficient permissions - showing error but staying on page"),h("Access denied. Admin, Manager, or Superadmin role required."),v(!1),d("/dashboard");return}K(),M()},[K,M,d]);const ie=(t,r)=>{R(s=>({...s,[t]:r}))},Se=t=>{const r=t.target.files[0];if(r){if(!r.type.startsWith("image/")){g("Please select a valid image file (JPEG, PNG, GIF, WebP, SVG)","error");return}if(r.size>5*1024*1024){g("File size should be less than 5MB","error");return}H(r);const s=new FileReader;s.onload=a=>{Y(a.target.result)},s.readAsDataURL(r)}},Ae=async()=>{const t=D();if(!t){h("You are not authenticated. Please log in."),d("/login");return}if(!l.name.trim()){g("Please enter a category title in Default language","error");return}if(!l.module||!/^[0-9a-fA-F]{24}$/.test(l.module)){g("Please select a valid module","error");return}v(!0);try{const r=new FormData;r.append("title",l.name.trim()),r.append("module",l.module),l.description.trim()&&r.append("description",l.description.trim()),l.parentCategory.trim()&&r.append("parentCategory",l.parentCategory.trim()),r.append("displayOrder",l.displayOrder),r.append("isActive",l.isActive),r.append("isFeatured",l.isFeatured),l.metaTitle.trim()&&r.append("metaTitle",l.metaTitle.trim()),l.metaDescription.trim()&&r.append("metaDescription",l.metaDescription.trim()),r.append("createdBy",ne()),r.append("image",z),console.log("Sending FormData with module:",l.module);const s=await fetch(`${W}/categories`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!s.ok){let i="Failed to add category";const o=s.status;try{const y=await s.text();let n;try{n=JSON.parse(y),i=n.error||i}catch{i=y||i}if(o===401){h("Session expired. Please log in again."),d("/login");return}if(o===403){h("Access denied. You don't have permission to create categories."),d("/dashboard");return}if(o===502&&(i="Server error: Unable to connect to the backend service. Please try again later."),n?.error&&n.error.includes("Unexpected file field")){g(`Image upload failed: ${n.error}. Please ensure the file is sent with the field name 'image'.`,"error");return}if(n?.error&&n.error.includes("title is required")){g("A title is required for the category.","error");return}if(n?.error&&n.error.includes("Module")){g(n.error,"error");return}}catch{i="Failed to parse server response. Please try again."}throw new Error(i)}const a=await s.json(),c=a.data?.category||a.category;g(`Category "${c.title||c.name}" added successfully!`,"success"),le(),M()}catch(r){console.error("Error adding category:",r);let s=r.message||"Failed to add category due to a network or server error. Please try again.";r.message.includes("Failed to fetch")&&(s="Network error: Unable to reach the server. Please check your connection or try again later."),g(s,"error")}finally{v(!1)}},le=()=>{R(t=>({...t,name:"",description:"",parentCategory:"",module:t.module||(S.length>0?S[0]._id:""),displayOrder:0,isActive:!0,isFeatured:!1,metaTitle:"",metaDescription:""})),H(null),Y(null),N.current&&(N.current.value="")},Ie=t=>{d(`/categories/edit/${t}`)},Te=t=>{const r=L.find(s=>s.id===t);U({open:!0,categoryId:t,categoryName:r?.names?.default||""})},Ee=async()=>{const t=D();if(!t){h("You are not authenticated. Please log in."),d("/login");return}v(!0);try{const r=await fetch(`${W}/categories/${F.categoryId}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!r.ok){const s=await r.text();let a;try{a=JSON.parse(s)}catch{a={error:s||"Unknown error"}}if(r.status===401){h("Session expired. Please log in again."),d("/login");return}if(r.status===403){h("Access denied. You don't have permission to delete categories."),d("/dashboard");return}throw new Error(a.error||`HTTP error! status: ${r.status}`)}g(`Category "${F.categoryName}" deleted successfully!`,"success"),U({open:!1,categoryId:null,categoryName:""}),M()}catch(r){console.error("Error deleting category:",r),g(`Failed to delete category: ${r.message}`,"error")}finally{v(!1)}},$e=async t=>{const r=D();if(!r){h("You are not authenticated. Please log in."),d("/login");return}const s=L.find(o=>o.id===t);if(!s){g("Category not found","error");return}const a=s.status,c=a?`/categories/${t}/block`:`/categories/${t}/reactivate`,i=a?"blocked":"reactivated";v(!0);try{const o=await fetch(`${W}${c}`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({updatedBy:ne()})});if(!o.ok){const A=await o.text();let Q;try{Q=JSON.parse(A)}catch{Q={error:A||"Unknown error"}}if(o.status===401){h("Session expired. Please log in again."),d("/login");return}if(o.status===403){h(`Access denied. You don't have permission to ${i} categories.`),d("/dashboard");return}throw new Error(Q.error||`HTTP error! status: ${o.status}`)}const y=await o.json(),n=y.data?.category||y.category;g(`Category "${n.title||n.name}" ${i} successfully`,"info"),M()}catch(o){console.error(`Error ${i} category:`,o),g(`Failed to ${i} category: ${o.message}`,"error")}finally{v(!1)}},g=(t,r="success")=>{oe({open:!0,message:t,severity:r})},de=()=>{oe(t=>({...t,open:!1}))},De=()=>{d("/login")},Me=()=>{d("/dashboard")},ce=()=>{K(),M()},O=()=>x[m].key,P=L.filter(t=>{const r=O(),s=t.names[r].toLowerCase().includes($.toLowerCase()),a=V==="all"||t.module?._id===V;return s&&a}),Pe=t=>{ae(t.currentTarget)},X=()=>{ae(null)},Le=()=>{const t=O(),s=["SI","ID",`Name (${x[m].label})`,"Module","Status"],a=P.map((n,A)=>[A+1,n.id,n.names[t],n.module?n.module.title||"N/A":"None",n.status?"Active":"Inactive"]);let c=s.join(",")+`
`;a.forEach(n=>{c+=n.map(A=>`"${A}"`).join(",")+`
`});const i=new Blob([c],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),y=URL.createObjectURL(i);o.setAttribute("href",y),o.setAttribute("download",`categories_${t}_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),X(),g("CSV file downloaded successfully!","success")},Ne=()=>{const t=O(),s=["SI","ID",`Name (${x[m].label})`,"Module","Status"],a=P.map((n,A)=>[A+1,n.id,n.names[t],n.module?n.module.title||"N/A":"None",n.status?"Active":"Inactive"]);let c=s.join("	")+`
`;a.forEach(n=>{c+=n.join("	")+`
`});const i=new Blob([c],{type:"application/vnd.ms-excel;charset=utf-8;"}),o=document.createElement("a"),y=URL.createObjectURL(i);o.setAttribute("href",y),o.setAttribute("download",`categories_${t}_${new Date().toISOString().split("T")[0]}.xls`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),X(),g("Excel file downloaded successfully!","success")};return f&&L.length===0&&T?e.jsx(p,{sx:{p:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsxs(Z,{alignItems:"center",spacing:2,children:[e.jsx(B,{}),e.jsx(j,{children:"Loading categories and modules..."})]})}):e.jsxs(p,{sx:{width:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5",p:{xs:2,sm:3}},children:[e.jsx(ue,{open:!!k||!!b,autoHideDuration:null,onClose:()=>{h(null),E(null)},children:e.jsx(he,{severity:"error",onClose:()=>{h(null),E(null)},action:e.jsxs(Z,{direction:"row",spacing:1,children:[(k||b)&&(k?.includes("not authenticated")||b?.includes("not authenticated"))&&e.jsx(w,{color:"inherit",size:"small",onClick:De,children:"Go to Login"}),(k||b)&&(k?.includes("Access denied")||b?.includes("Access denied"))&&e.jsx(w,{color:"inherit",size:"small",onClick:Me,children:"Go to Dashboard"}),(k||b)&&!(k?.includes("not authenticated")||b?.includes("not authenticated"))&&!(k?.includes("Access denied")||b?.includes("Access denied"))&&e.jsx(w,{color:"inherit",size:"small",onClick:ce,children:"Retry"})]}),children:k||b})}),e.jsx(p,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(ge,{sx:{width:"100%",maxWidth:"1400px",boxShadow:3,borderRadius:3},children:e.jsxs(me,{sx:{p:{xs:2,sm:4}},children:[e.jsx(ze,{value:m,onChange:we,variant:"scrollable",scrollButtons:"auto",sx:{mb:4,borderBottom:1,borderColor:"divider","& .MuiTabs-indicator":{backgroundColor:"#2196f3"}},children:x.map(t=>e.jsx(Re,{label:t.label},t.key))}),e.jsxs(j,{variant:"subtitle1",sx:{mb:1,fontWeight:500},children:["Title (",x[m].label,") ",e.jsx("span",{style:{color:"#f44336"},children:"*"})]}),e.jsx(_,{fullWidth:!0,value:x[m].key==="default"?l.name:"",onChange:t=>x[m].key==="default"&&ie("name",t.target.value),placeholder:`Enter category title in ${x[m].label}`,variant:"outlined",disabled:x[m].key!=="default",sx:{mb:4,"& .MuiOutlinedInput-root":{direction:x[m].key==="arabic"?"rtl":"ltr"}}}),e.jsxs(j,{variant:"subtitle1",sx:{mb:1,fontWeight:500},children:["Module ",e.jsx("span",{style:{color:"#f44336"},children:"*"})]}),e.jsx(_,{select:!0,fullWidth:!0,value:l.module,onChange:t=>ie("module",t.target.value),placeholder:"Select a module",variant:"outlined",disabled:T||b||S.length===0,sx:{mb:4,"& .MuiOutlinedInput-root":{backgroundColor:T||b||S.length===0?"#f5f5f5":"white"}},children:T?e.jsx(I,{value:"",children:"Loading modules..."}):b?e.jsx(I,{value:"",children:"Error loading modules"}):S.length===0?e.jsx(I,{value:"",children:"No modules available"}):S.map(t=>e.jsx(I,{value:t._id,children:t.title||t.name||"Unnamed Module"},t._id))}),e.jsxs(j,{variant:"subtitle1",sx:{mb:1,fontWeight:500},children:["Image ",e.jsx("span",{style:{color:"#f44336"},children:"*"})," ",e.jsx("span",{style:{color:"#e91e63",fontSize:"0.875rem"},children:"(Ratio 3:2)"})]}),e.jsxs(p,{sx:{display:"flex",gap:3,mb:4,flexDirection:{xs:"column",sm:"row"}},children:[e.jsxs(p,{children:[e.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:Se,ref:N,style:{display:"none"}}),e.jsx("label",{htmlFor:"image-upload-input",children:e.jsxs(w,{component:"span",variant:"outlined",sx:{width:{xs:"100%",sm:240},height:{xs:100,sm:140},border:"2px dashed #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",gap:1,color:"text.secondary",textTransform:"none","&:hover":{borderColor:"#2196f3",backgroundColor:"#e3f2fd",border:"2px dashed #2196f3"}},children:[e.jsx(tt,{sx:{fontSize:40,color:"#bdbdbd"}}),e.jsx(j,{variant:"body2",color:"text.secondary",children:z?"Change Image":"Upload Image"})]})})]}),re&&e.jsxs(p,{sx:{position:"relative"},children:[e.jsxs(p,{sx:{width:{xs:"100%",sm:240},height:{xs:160,sm:140},border:"2px solid #e0e0e0",borderRadius:2,overflow:"hidden",position:"relative"},children:[e.jsx("img",{src:re,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx(ee,{size:"small",onClick:()=>{Y(null),H(null),N.current&&(N.current.value="")},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:e.jsx(Fe,{fontSize:"small"})})]}),e.jsx(j,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:z?.name})]})]}),e.jsxs(p,{sx:{display:"flex",flexWrap:"wrap",justifyContent:{xs:"center",sm:"flex-end"},gap:2},children:[e.jsx(w,{variant:"outlined",onClick:le,sx:{px:4,py:1.5,textTransform:"none",borderColor:"#e0e0e0",color:"#666","&:hover":{borderColor:"#bdbdbd",backgroundColor:"#f5f5f5"}},disabled:f||T,children:"Reset"}),e.jsx(w,{variant:"contained",onClick:Ae,disabled:!l.name.trim()||!l.module||!/^[0-9a-fA-F]{24}$/.test(l.module)||!z||f||T||b||S.length===0,sx:{px:4,py:1.5,backgroundColor:"#00695c",textTransform:"none","&:hover":{backgroundColor:"#004d40"},"&:disabled":{backgroundColor:"#e0e0e0",color:"#999"}},children:f?e.jsx(B,{size:20,color:"inherit"}):"Add"})]})]})})}),e.jsx(p,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{sx:{width:"100%",maxWidth:"1400px",boxShadow:3,borderRadius:3},children:e.jsxs(me,{sx:{p:{xs:2,sm:3}},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2,mb:3},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(j,{variant:"h6",fontWeight:600,children:"Category List"}),e.jsx(xe,{label:P.length,size:"small",sx:{backgroundColor:"#e3f2fd",color:"#2196f3",fontWeight:600}}),e.jsx(xe,{label:`Language: ${x[m].label}`,size:"small",sx:{backgroundColor:"#e8f5e8",color:"#2e7d32",fontWeight:500}})]}),e.jsxs(p,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.jsxs(_,{select:!0,size:"small",value:V,onChange:t=>G(t.target.value),sx:{minWidth:{xs:"100%",sm:200}},disabled:f||T,children:[e.jsx(I,{value:"all",children:"All Modules"}),S.map(t=>e.jsx(I,{value:t._id,children:t.title||t.name||"Unnamed Module"},t._id))]}),e.jsx(_,{size:"small",placeholder:`Search categories in ${x[m].label}`,value:$,onChange:t=>be(t.target.value),sx:{minWidth:{xs:"100%",sm:250,md:300},"& .MuiOutlinedInput-root":{direction:x[m].key==="arabic"?"rtl":"ltr"}},InputProps:{startAdornment:e.jsx(Ue,{position:"start",children:e.jsx(rt,{sx:{color:"#bdbdbd"}})})},disabled:f}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(st,{}),endIcon:e.jsx(ot,{}),onClick:Pe,sx:{textTransform:"none",borderColor:"#e0e0e0",color:"#2196f3","&:hover":{borderColor:"#2196f3",backgroundColor:"#e3f2fd"}},disabled:f||P.length===0,children:"Export"}),e.jsxs(Oe,{anchorEl:se,open:ve,onClose:X,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{minWidth:180,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",borderRadius:2,mt:1}},children:[e.jsxs(I,{onClick:Ne,sx:{py:1.5,px:2},children:[e.jsx(fe,{children:e.jsx(at,{sx:{color:"#1976d2"}})}),e.jsx(pe,{primary:"Export to Excel",primaryTypographyProps:{fontWeight:500}})]}),e.jsx(Be,{}),e.jsxs(I,{onClick:Le,sx:{py:1.5,px:2},children:[e.jsx(fe,{children:e.jsx(nt,{sx:{color:"#2e7d32"}})}),e.jsx(pe,{primary:"Export to CSV",primaryTypographyProps:{fontWeight:500}})]})]})]})]}),f&&L.length>0&&e.jsx(p,{display:"flex",justifyContent:"center",p:2,children:e.jsx(B,{size:24})}),e.jsx(_e,{component:He,sx:{overflowX:"auto"},children:e.jsxs(Ye,{size:"small",children:[e.jsx(Je,{sx:{backgroundColor:"#fafafa"},children:e.jsxs(te,{children:[e.jsx(C,{sx:{fontWeight:600,color:"#666"},children:"SI"}),e.jsx(C,{sx:{fontWeight:600,color:"#666"},children:"Image"}),e.jsxs(C,{sx:{fontWeight:600,color:"#666",direction:x[m].key==="arabic"?"rtl":"ltr"},children:["Name (",x[m].label,")"]}),e.jsx(C,{sx:{fontWeight:600,color:"#666"},children:"Module"}),e.jsx(C,{sx:{fontWeight:600,color:"#666"},children:"Status"}),e.jsx(C,{sx:{fontWeight:600,color:"#666"},children:"Action"})]})}),e.jsx(Ve,{children:P.length>0?P.map((t,r)=>{const s=O();return e.jsxs(te,{sx:{"&:hover":{backgroundColor:"#f9f9f9"}},children:[e.jsx(C,{children:r+1}),e.jsx(C,{children:t.image?e.jsx(p,{sx:{width:50,height:35,borderRadius:1,overflow:"hidden",border:"1px solid #e0e0e0"},children:e.jsx("img",{src:t.image,alt:t.names[s],style:{width:"100%",height:"100%",objectFit:"cover"},onError:a=>{console.error("Image failed to load:",t.image),a.target.style.display="none",a.target.parentElement.innerHTML='<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f5f5f5;font-size:10px;color:#999;">Error</div>'}})}):e.jsx(p,{sx:{width:50,height:35,borderRadius:1,backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e0e0e0"},children:e.jsx(j,{variant:"caption",color:"text.secondary",children:"No Image"})})}),e.jsx(C,{sx:{fontWeight:500,maxWidth:200,direction:x[m].key==="arabic"?"rtl":"ltr"},children:e.jsx(j,{variant:"body2",sx:{wordBreak:"break-word"},children:t.names[s]})}),e.jsx(C,{children:e.jsx(j,{variant:"body2",children:t.module?t.module.title||"N/A":"None"})}),e.jsx(C,{children:e.jsx(Ge,{checked:t.status,onChange:()=>$e(t.id),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#2196f3"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#2196f3"}},disabled:f})}),e.jsx(C,{children:e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(ee,{size:"small",onClick:()=>Ie(t.id),sx:{color:"#2196f3"},disabled:f,children:e.jsx(qe,{fontSize:"small"})}),e.jsx(ee,{size:"small",onClick:()=>Te(t.id),sx:{color:"#f44336"},disabled:f,children:e.jsx(Ke,{fontSize:"small"})})]})})]},t.id)}):e.jsx(te,{children:e.jsx(C,{colSpan:6,sx:{textAlign:"center",py:4,color:"#999"},children:e.jsxs(Z,{spacing:2,alignItems:"center",children:[e.jsx(j,{variant:"h6",color:"textSecondary",children:f?"Loading categories...":$?`No categories found matching your search in ${x[m].label}.`:"No categories available."}),k||b?e.jsx(w,{variant:"outlined",onClick:ce,children:"Try Again"}):!f&&!$&&e.jsx(j,{variant:"body2",color:"textSecondary",children:"Create your first category using the form above"})]})})})})]})})]})})}),e.jsxs(Xe,{open:F.open,onClose:()=>U({open:!1,categoryId:null,categoryName:""}),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Qe,{sx:{fontWeight:600},children:"Confirm Delete"}),e.jsx(Ze,{children:e.jsxs(j,{children:['Are you sure you want to delete the category "',F.categoryName,'"? This action cannot be undone.']})}),e.jsxs(et,{sx:{p:3,gap:1},children:[e.jsx(w,{onClick:()=>U({open:!1,categoryId:null,categoryName:""}),variant:"outlined",sx:{textTransform:"none"},disabled:f,children:"Cancel"}),e.jsx(w,{onClick:Ee,variant:"contained",color:"error",sx:{textTransform:"none"},disabled:f,children:f?e.jsx(B,{size:20,color:"inherit"}):"Delete"})]})]}),e.jsx(ue,{open:q.open,autoHideDuration:4e3,onClose:de,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(he,{onClose:de,severity:q.severity,variant:"filled",sx:{width:"100%"},children:q.message})})]})}export{mt as default};
