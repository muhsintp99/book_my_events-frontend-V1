import{h as W,j as e,a9 as H,a as P,r as o,B as s,aa as O,E as B,ab as $,T as d,q as G,w as V,c as p,m as q,G as y,a4 as X,a2 as Z,g as J,a6 as K,X as Q,d as m,Z as Y,A as _}from"./index-Bv9CUdV4.js";import{C as ee}from"./CloudUpload-DJGsC8MK.js";const E=W(e.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}));function oe(){const{id:g}=H(),r=P(),[C]=o.useState([{id:11,names:{default:"Luxury Minibus",english:"Luxury Minibus",arabic:"حافلة صغيرة فاخرة"},status:!0,image:null},{id:10,names:{default:"Crossover",english:"Crossover",arabic:"كروس أوفر"},status:!0,image:null}]),[n,R]=o.useState(0),[c,u]=o.useState({id:"",names:{default:"",english:"",arabic:""},status:!0,image:null}),[j,z]=o.useState({}),[v,f]=o.useState(null),[k,h]=o.useState(null),[b,I]=o.useState({open:!1,message:"",severity:"success"}),i=[{key:"default",label:"Default"},{key:"english",label:"English(EN)"},{key:"arabic",label:"Arabic - العربية(AR)"}];o.useEffect(()=>{const a=C.find(t=>t.id===parseInt(g));a?(u(a),z(a),a.image&&h(a.image)):(l(`Category with ID ${g} not found`,"error"),setTimeout(()=>{r("/vehicles/category")},2e3))},[g,r,C]);const U=(a,t)=>{R(t)},A=(a,t)=>{u(x=>({...x,names:{...x.names,[a]:t}}))},w=a=>{const t=a.target.files[0];if(t){if(!t.type.startsWith("image/")){l("Please select a valid image file","error");return}if(t.size>5*1024*1024){l("File size should be less than 5MB","error");return}f(t);const x=new FileReader;x.onload=S=>{h(S.target.result),u(N=>({...N,image:S.target.result}))},x.readAsDataURL(t)}},F=()=>{u(j),h(j.image),f(null);const a=document.getElementById("edit-image-upload-input");a&&(a.value=""),l("Form reset to original values","info")},L=()=>{if(!c.names.default.trim()){l("Please enter a category name in Default language","error");return}console.log("Updated category:",c),l(`Category "${c.names.default}" updated successfully!`,"success"),setTimeout(()=>{r("/vehicles/category")},1500)},M=()=>{h(null),f(null),u(t=>({...t,image:null}));const a=document.getElementById("edit-image-upload-input");a&&(a.value="")},l=(a,t="success")=>{I({open:!0,message:a,severity:t})},T=()=>{I(a=>({...a,open:!1}))},D=()=>{r("/vehicles/category")};return e.jsxs(s,{sx:{width:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5",p:{xs:2,sm:3}},children:[e.jsx(s,{sx:{mb:3},children:e.jsxs(O,{"aria-label":"breadcrumb",children:[e.jsxs(B,{color:"inherit",href:"#",onClick:a=>{a.preventDefault(),r("/dashboard")},sx:{display:"flex",alignItems:"center",textDecoration:"none"},children:[e.jsx($,{sx:{mr:.5},fontSize:"inherit"}),"Dashboard"]}),e.jsx(B,{color:"inherit",href:"#",onClick:a=>{a.preventDefault(),r("/vehicles/category")},sx:{textDecoration:"none"},children:"Category Management"}),e.jsx(d,{color:"text.primary",children:"Edit Category"})]})}),e.jsx(s,{sx:{display:"flex",justifyContent:"center"},children:e.jsxs(G,{sx:{width:"100%",maxWidth:"1400px",boxShadow:3,borderRadius:3},children:[e.jsx(V,{title:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{onClick:D,sx:{backgroundColor:"#e3f2fd","&:hover":{backgroundColor:"#bbdefb"}},children:e.jsx(E,{})}),e.jsxs(d,{variant:"h6",fontWeight:"bold",children:["✏️ Update Category (ID: ",g,")"]})]}),sx:{borderBottom:"1px solid #e0e0e0"}}),e.jsxs(q,{sx:{p:{xs:2,sm:4}},children:[e.jsxs(y,{container:!0,spacing:4,children:[e.jsxs(y,{item:!0,xs:12,md:8,children:[e.jsx(X,{value:n,onChange:U,variant:"scrollable",scrollButtons:"auto",sx:{mb:4,borderBottom:1,borderColor:"divider","& .MuiTabs-indicator":{backgroundColor:"#2196f3"}},children:i.map((a,t)=>e.jsx(Z,{label:a.label},a.key))}),e.jsxs(d,{variant:"subtitle1",sx:{mb:1,fontWeight:500},children:["Name (",i[n].label,") ",e.jsx("span",{style:{color:"#f44336"},children:"*"})]}),e.jsx(J,{fullWidth:!0,value:c.names?.[i[n].key]||"",onChange:a=>A(i[n].key,a.target.value),placeholder:`Enter category name in ${i[n].label}`,variant:"outlined",sx:{mb:4,"& .MuiOutlinedInput-root":{direction:i[n].key==="arabic"?"rtl":"ltr"}}})]}),e.jsx(y,{item:!0,xs:12,md:4,children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(d,{variant:"subtitle1",sx:{mb:2,fontWeight:500},children:["Image ",e.jsx("span",{style:{color:"#f44336"},children:"*"})," ",e.jsx("span",{style:{color:"#e91e63",fontSize:"0.875rem"},children:"( Ratio 1:1)"})]}),e.jsx(s,{sx:{width:200,height:200,border:"2px dashed #e0e0e0",borderRadius:2,position:"relative",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#fafafa"},children:k?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:k,alt:"Category preview",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx(p,{size:"small",onClick:M,sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:e.jsx(K,{fontSize:"small"})}),e.jsxs(p,{component:"label",sx:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(33, 150, 243, 0.8)",color:"white","&:hover":{backgroundColor:"rgba(33, 150, 243, 1)"}},children:[e.jsx(Q,{fontSize:"small"}),e.jsx("input",{id:"edit-image-upload-input",type:"file",hidden:!0,accept:"image/*",onChange:w})]})]}):e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsx("input",{id:"edit-image-upload-input",type:"file",accept:"image/*",onChange:w,style:{display:"none"}}),e.jsx("label",{htmlFor:"edit-image-upload-input",children:e.jsxs(m,{component:"span",variant:"outlined",sx:{width:180,height:180,border:"2px dashed #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",gap:1,color:"text.secondary",textTransform:"none","&:hover":{borderColor:"#2196f3",backgroundColor:"#e3f2fd",border:"2px dashed #2196f3"}},children:[e.jsx(ee,{sx:{fontSize:40,color:"#bdbdbd"}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Upload Image"})]})})]})}),v&&e.jsx(d,{variant:"caption",color:"text.secondary",sx:{mt:1,textAlign:"center"},children:v.name})]})})]}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",justifyContent:{xs:"center",sm:"flex-end"},gap:2,mt:4,pt:3,borderTop:"1px solid #e0e0e0"},children:[e.jsx(m,{variant:"outlined",onClick:D,startIcon:e.jsx(E,{}),sx:{px:3,py:1.5,textTransform:"none",borderColor:"#e0e0e0",color:"#666","&:hover":{borderColor:"#bdbdbd",backgroundColor:"#f5f5f5"}},children:"Back to List"}),e.jsx(m,{variant:"outlined",onClick:F,sx:{px:4,py:1.5,textTransform:"none",borderColor:"#ff9800",color:"#ff9800","&:hover":{borderColor:"#f57c00",backgroundColor:"#fff3e0"}},children:"Reset"}),e.jsx(m,{variant:"contained",onClick:L,disabled:!c.names?.default?.trim(),sx:{px:4,py:1.5,backgroundColor:"#00695c",textTransform:"none","&:hover":{backgroundColor:"#004d40"},"&:disabled":{backgroundColor:"#e0e0e0",color:"#999"}},children:"Update Category"})]})]})]})}),e.jsx(Y,{open:b.open,autoHideDuration:4e3,onClose:T,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(_,{onClose:T,severity:b.severity,variant:"filled",sx:{width:"100%"},children:b.message})})]})}export{oe as default};
