import{a as A,r as n,j as e,B as t,K as j,T as d,D as I,o as c,a4 as L,a2 as u,g as N,b as $,C as k,N as E,Q as D,U as f,V as r,W as R,k as _,c as b,X as B,Y as W,Z as z,A as H}from"./index-Bv9CUdV4.js";import{S as F}from"./Search-M3ebp4kZ.js";const Q=()=>{const y=A(),[p,P]=n.useState(0),[l,T]=n.useState([]),[h,w]=n.useState(""),[C,m]=n.useState(!0),[x,g]=n.useState({open:!1,message:"",severity:"error"});n.useEffect(()=>{(async()=>{try{m(!0);const o=await(await fetch("https://api.bookmyevent.ae/api/users?role=vendor")).json();if(!Array.isArray(o.users))throw new Error("Invalid vendor data");const V=o.users.map((a,S)=>({id:S+1,_id:a._id,name:`${a.firstName||""} ${a.lastName||""}`.trim(),email:a.email||"N/A",phone:a.phone||a.mobile||"N/A",isVerified:a.isVerified||!1,status:a.isVerified?"Verified":"Pending"}));T(V)}catch(i){g({open:!0,message:i.message,severity:"error"})}finally{m(!1)}})()},[]);const v=l.filter(s=>{const i=p===0?!s.isVerified:s.isVerified,o=s.name.toLowerCase().includes(h.toLowerCase())||s.email.toLowerCase().includes(h.toLowerCase());return i&&o});return e.jsxs(t,{p:3,bgcolor:"#f4f6f8",minHeight:"100vh",children:[e.jsxs(j,{sx:{p:3,mb:3,borderRadius:2},children:[e.jsx(d,{variant:"h5",fontWeight:600,children:"Providers List"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Manage pending & verified providers"}),e.jsx(I,{sx:{my:2}}),e.jsxs(t,{display:"flex",gap:2,flexWrap:"wrap",children:[e.jsx(c,{label:`Total: ${l.length}`,color:"primary"}),e.jsx(c,{label:`Verified: ${l.filter(s=>s.isVerified).length}`,color:"success"}),e.jsx(c,{label:`Pending: ${l.filter(s=>!s.isVerified).length}`,color:"warning"})]})]}),e.jsx(j,{sx:{p:2,mb:2,borderRadius:2},children:e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[e.jsxs(L,{value:p,onChange:(s,i)=>P(i),children:[e.jsx(u,{label:"Pending Providers"}),e.jsx(u,{label:"Verified Providers"})]}),e.jsx(N,{size:"small",placeholder:"Search provider...",value:h,onChange:s=>w(s.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(F,{})})}})]})}),e.jsx(j,{sx:{borderRadius:2},children:C?e.jsxs(t,{p:3,display:"flex",gap:2,children:[e.jsx(k,{size:22}),e.jsx(d,{children:"Loading providers..."})]}):e.jsxs(E,{children:[e.jsx(D,{children:e.jsxs(f,{children:[e.jsx(r,{children:"Provider"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Phone"}),e.jsx(r,{children:"Status"}),e.jsx(r,{align:"center",children:"Actions"})]})}),e.jsxs(R,{children:[v.map(s=>e.jsxs(f,{hover:!0,children:[e.jsx(r,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(_,{children:s.name.charAt(0)}),e.jsx(d,{children:s.name})]})}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.phone}),e.jsx(r,{children:e.jsx(c,{label:s.status,size:"small",color:s.isVerified?"success":"warning"})}),e.jsxs(r,{align:"center",children:[e.jsx(b,{color:"primary",onClick:()=>y(`/makeup/AddProvider/${s._id}`),children:e.jsx(B,{})}),e.jsx(b,{color:"error",onClick:()=>alert(`Delete provider ${s.name}`),children:e.jsx(W,{})})]})]},s._id)),v.length===0&&e.jsx(f,{children:e.jsx(r,{colSpan:5,align:"center",children:"No providers found"})})]})]})}),e.jsx(z,{open:x.open,autoHideDuration:4e3,onClose:()=>g(s=>({...s,open:!1})),children:e.jsx(H,{severity:x.severity,variant:"filled",children:x.message})})]})};export{Q as default};
