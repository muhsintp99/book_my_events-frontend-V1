import{r as i,j as e,B as p,T as y,K as w,S as d,g as S,d as o,J as C,N as k,Q as T,U as l,V as s,W as v}from"./index-Bv9CUdV4.js";import{a as B}from"./index-Ov-tEB_r.js";const F=()=>{const[t,h]=i.useState(""),[x,j]=i.useState([]),[r,m]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const g=((await B.get("http://localhost:5000/api/bookings")).data.bookings||[]).filter(f=>f.paymentStatus?.toLowerCase()==="failed");j(g)}catch(n){console.error("Error fetching failed payments",n)}finally{m(!1)}})()},[]);const u=a=>h(a.target.value),c=x.filter(a=>a._id.includes(t)||(a.fullName||"").toLowerCase().includes(t.toLowerCase())||(a.emailAddress||"").toLowerCase().includes(t.toLowerCase()));return e.jsxs(p,{p:2,children:[e.jsx(y,{variant:"h4",gutterBottom:!0,children:"Failed Payments"}),e.jsxs(w,{sx:{mt:2,width:"100%"},children:[e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(S,{label:"Search by Booking ID, Name, Email",variant:"outlined",size:"small",value:t,onChange:u,sx:{maxWidth:{sm:300}}}),e.jsx(o,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(C,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(k,{stickyHeader:!0,children:[e.jsx(T,{children:e.jsxs(l,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Full Name"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Payment Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(v,{children:[r&&e.jsx(l,{children:e.jsx(s,{colSpan:8,align:"center",children:"Loading..."})}),!r&&c.map((a,n)=>e.jsxs(l,{children:[e.jsx(s,{children:n+1}),e.jsx(s,{children:a._id}),e.jsx(s,{children:a.fullName}),e.jsx(s,{children:a.emailAddress}),e.jsx(s,{children:a.finalPrice}),e.jsx(s,{children:new Date(a.bookingDate).toLocaleDateString()}),e.jsx(s,{children:a.paymentStatus}),e.jsx(s,{children:e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(o,{variant:"outlined",size:"small",children:"Retry"}),e.jsx(o,{variant:"outlined",size:"small",children:"View"})]})})]},a._id)),!r&&c.length===0&&e.jsx(l,{children:e.jsx(s,{colSpan:8,align:"center",children:"No failed payments found"})})]})]})})]})]})};export{F as default};
