import{a as P,r,j as e,B as a,T as n,d as T,q as W,m as G,g as k,ad as V,c as S,N as H,Q as z,U as w,V as i,W as Q,a3 as X,X as Z,Z as $,A as K}from"./index-CgvkLXhQ.js";import{A as Y}from"./Add-DbuPZ22d.js";import{S as _}from"./Search-DS6UMqv3.js";import{C as A}from"./CloudUpload-CXdiHdg2.js";import{V as ee}from"./Visibility-nGoOtfDL.js";import{F as te}from"./FormControlLabel-DFPZepAl.js";const E=V(a)(({theme:o})=>({border:"2px dashed #e0e0e0",borderRadius:o.shape.borderRadius,padding:o.spacing(3),textAlign:"center",backgroundColor:o.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:o.palette.primary.main},'& input[type="file"]':{display:"none"}})),ie=()=>{P();const[o,g]=r.useState([]),[f,j]=r.useState(""),[p,x]=r.useState(null),[h,m]=r.useState(null),[D,b]=r.useState(!1),[y,v]=r.useState(null),[N,d]=r.useState(!1),[C,c]=r.useState("");r.useEffect(()=>{const t=localStorage.getItem("modules");if(t){const l=JSON.parse(t).map(u=>({...u,status:u.status||"active"}));g(l),localStorage.setItem("modules",JSON.stringify(l))}return window.addEventListener("moduleAdded",()=>{const s=JSON.parse(localStorage.getItem("modules")||"[]").map(l=>({...l,status:l.status||"active"}));g(s)}),()=>window.removeEventListener("moduleAdded",()=>{})},[]);const O=()=>{if(!f){c("Module name is required."),d(!0);return}if(!p){c("App icon is required."),d(!0);return}if(!h){c("Thumbnail image is required."),d(!0);return}const t={name:f,appIcon:URL.createObjectURL(p),thumbnail:URL.createObjectURL(h),status:"active"};let s;y!==null?(s=o.map((l,u)=>u===y?t:l),c("Module updated successfully!")):(s=[...o,t],c("Module added successfully!")),g(s),localStorage.setItem("modules",JSON.stringify(s)),window.dispatchEvent(new Event("moduleAdded")),j(""),x(null),m(null),v(null),b(!1),d(!0)},R=t=>{const s=o.map((l,u)=>u===t?{...l,status:l.status==="active"?"inactive":"active"}:l);g(s),localStorage.setItem("modules",JSON.stringify(s)),window.dispatchEvent(new Event("moduleAdded")),c(`Module status updated to ${s[t].status}!`),d(!0)},L=t=>{console.log("Viewing module:",t),c("Module details logged to console."),d(!0)},B=t=>{const s=o[t];j(s.name),x(null),m(null),v(t),b(!0)},I=t=>{t.preventDefault()},U=t=>{t.preventDefault();const s=t.dataTransfer.files[0];s&&x(s)},J=t=>{t.preventDefault();const s=t.dataTransfer.files[0];s&&m(s)},F=t=>{const s=t.target.files[0];s&&x(s)},q=t=>{const s=t.target.files[0];s&&m(s)},M=(t,s)=>{s!=="clickaway"&&d(!1)};return e.jsxs(a,{sx:{padding:2,backgroundColor:"white"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(n,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{component:"span",sx:{mr:1},children:"ðŸ“š"})," Module List ",e.jsxs(a,{component:"span",sx:{ml:1,color:"text.secondary"},children:["(",o.length,")"]})]}),e.jsx(T,{onClick:()=>{b(!0),v(null),j(""),x(null),m(null)},variant:"contained",startIcon:e.jsx(Y,{}),sx:{backgroundColor:"#397ed3ff","&:hover":{backgroundColor:"#79a8e9ff"}},children:"Add Module"})]}),D&&e.jsxs(a,{sx:{mb:2,p:2,border:"1px solid #e0e0e0",borderRadius:"4px"},children:[e.jsx(n,{variant:"h6",sx:{mb:2},children:y!==null?"Edit Module":"Add New Module"}),e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(T,{variant:"contained",onClick:O,sx:{backgroundColor:"#397ed3ff","&:hover":{backgroundColor:"#79a8e9ff"}},children:"Save"})}),e.jsx(W,{sx:{p:2,boxShadow:"none",border:"1px solid #e0e0e0"},children:e.jsxs(G,{sx:{"&:last-child":{pb:2}},children:[e.jsx(k,{label:"Name of Module",variant:"outlined",value:f,onChange:t=>j(t.target.value),fullWidth:!0,sx:{mb:2},required:!0}),e.jsxs(a,{sx:{mb:2},children:[e.jsx(n,{variant:"body1",gutterBottom:!0,children:"App Icon"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 1:1)"}),e.jsxs(E,{onDragOver:I,onDrop:U,onClick:()=>document.getElementById("app-icon-upload").click(),children:[p?e.jsxs(a,{children:[e.jsx("img",{src:URL.createObjectURL(p),alt:"App Icon preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:"8px"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:p.name})]}):e.jsxs(a,{children:[e.jsx(A,{sx:{fontSize:40,color:"#616161",mb:1}}),e.jsx(n,{variant:"body2",color:"primary",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"app-icon-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:F})]})]}),e.jsxs(a,{sx:{mb:2},children:[e.jsx(n,{variant:"body1",gutterBottom:!0,children:"Thumbnail Image"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(E,{onDragOver:I,onDrop:J,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[h?e.jsxs(a,{children:[e.jsx("img",{src:URL.createObjectURL(h),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:"8px"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:h.name})]}):e.jsxs(a,{children:[e.jsx(A,{sx:{fontSize:40,color:"#616161",mb:1}}),e.jsx(n,{variant:"body2",color:"primary",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:q})]})]})]})})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(k,{variant:"outlined",placeholder:"Ex: Search by module name...",size:"small",sx:{width:"300px"},InputProps:{endAdornment:e.jsx(S,{edge:"end",children:e.jsx(_,{})})}})}),e.jsxs(H,{sx:{minWidth:650},"aria-label":"module table",children:[e.jsx(z,{children:e.jsxs(w,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(i,{children:"Sl"}),e.jsx(i,{children:"Module Name"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Action"})]})}),e.jsx(Q,{children:o.length>0?o.map((t,s)=>e.jsxs(w,{children:[e.jsx(i,{children:s+1}),e.jsx(i,{children:t.name}),e.jsx(i,{children:e.jsx(te,{control:e.jsx(X,{checked:t.status==="active",onChange:()=>R(s),color:"primary"}),label:t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Unknown"})}),e.jsxs(i,{children:[e.jsx(S,{onClick:()=>L(t),title:"View",children:e.jsx(ee,{})}),e.jsx(S,{onClick:()=>B(s),title:"Edit",children:e.jsx(Z,{})})]})]},s)):e.jsx(w,{children:e.jsx(i,{colSpan:4,align:"center",children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(a,{component:"img",src:"https://via.placeholder.com/150",alt:"No Data",sx:{width:"150px",height:"150px"}}),e.jsx(n,{variant:"body1",children:"No Data Found"})]})})})})]}),e.jsx($,{open:N,autoHideDuration:3e3,onClose:M,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(K,{onClose:M,severity:C.includes("required")?"error":"success",sx:{backgroundColor:C.includes("required")?"#d32f2f":"#1976d2",color:"white"},children:C})})]})};export{ie as default};
