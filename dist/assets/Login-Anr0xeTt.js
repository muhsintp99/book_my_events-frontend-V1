import{u as L,a as z,r,j as e,A as B,F as f,I as y,O as b,b as D,c as E,G as s,T as x,L as w,B as F,d as O,C as W,e as N,f as T,S as q,D as M}from"./index-C-AtCVLN.js";import{V,A as H,a as J,b as R}from"./AnimateButton-0JYLgcFC.js";import{V as G}from"./Visibility-DKovfMtT.js";import{F as _}from"./FormControlLabel-0HBe7pka.js";import{C as K}from"./Checkbox-BhQm9k8d.js";const Q="https://api.bookmyevent.ae/api";function U(){const l=L(),o=z(),[g,S]=r.useState(!0),[u,C]=r.useState(!1),[i,c]=r.useState(!1),[j,a]=r.useState(""),[h,I]=r.useState(""),[m,v]=r.useState(""),k=()=>C(!u),A=t=>t.preventDefault(),P=async t=>{if(t.preventDefault(),a(""),c(!0),!h.trim()){a("Email is required"),c(!1);return}if(!m.trim()){a("Password is required"),c(!1);return}try{const d=await fetch(`${Q}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.trim(),password:m})}),n=await d.json();if(!d.ok){a(n.message||"Login failed");return}g?(localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user))):(sessionStorage.setItem("token",n.token),sessionStorage.setItem("user",JSON.stringify(n.user)));const p=n.user.role;o(p==="superadmin"?"/superadmin-dashboard":p==="vendor"?"/vendor-dashboard":"/dashboard")}catch(d){a(d.message||"Network error")}finally{c(!1)}};return e.jsxs("form",{onSubmit:P,children:[j&&e.jsx(B,{severity:"error",sx:{mb:2},children:j}),e.jsxs(f,{fullWidth:!0,sx:{...l.typography.customInput,mb:2},children:[e.jsx(y,{htmlFor:"email-login",children:"Email Address"}),e.jsx(b,{id:"email-login",type:"email",value:h,onChange:t=>I(t.target.value),disabled:i,required:!0})]}),e.jsxs(f,{fullWidth:!0,sx:{...l.typography.customInput,mb:2},children:[e.jsx(y,{htmlFor:"password-login",children:"Password"}),e.jsx(b,{id:"password-login",type:u?"text":"password",value:m,onChange:t=>v(t.target.value),disabled:i,required:!0,endAdornment:e.jsx(D,{position:"end",children:e.jsx(E,{onClick:k,onMouseDown:A,edge:"end",size:"large",children:u?e.jsx(G,{}):e.jsx(V,{})})}),label:"Password"})]}),e.jsxs(s,{container:!0,justifyContent:"space-between",sx:{mb:2},children:[e.jsx(s,{children:e.jsx(_,{control:e.jsx(K,{checked:g,onChange:t=>S(t.target.checked)}),label:"Keep me logged in"})}),e.jsx(s,{children:e.jsx(x,{component:w,to:"/forgot-password",color:"secondary",sx:{textDecoration:"none"},children:"Forgot Password?"})})]}),e.jsx(F,{sx:{mt:2},children:e.jsx(H,{children:e.jsx(O,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:i,startIcon:i?e.jsx(W,{size:20,color:"inherit"}):null,children:i?"Signing In...":"Sign In"})})})]})}function se(){const l=N(o=>o.breakpoints.down("md"));return e.jsx(J,{children:e.jsx(s,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(s,{size:12,children:e.jsx(s,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(s,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(R,{children:e.jsxs(s,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(s,{sx:{mb:3},children:e.jsx(w,{to:"#","aria-label":"logo",children:e.jsx(T,{})})}),e.jsx(s,{size:12,children:e.jsx(s,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(s,{children:e.jsxs(q,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(x,{gutterBottom:!0,variant:l?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(x,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your credentials to continue"})]})})})}),e.jsx(s,{size:12,children:e.jsx(U,{})}),e.jsx(s,{size:12,children:e.jsx(M,{})})]})})})})})})})}export{se as default};
