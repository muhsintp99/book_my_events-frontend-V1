import{r as i,u as B,e as T,j as e,B as D,T as x,K as v,S as j,g as P,d as o,J as L,N as E,Q as N,U as r,V as s,W as A,_ as b,$ as W,a0 as _,a1 as z}from"./index-CgvkLXhQ.js";import{a as I}from"./index-Ov-tEB_r.js";const O=()=>{const[g,u]=i.useState(!1),[a,m]=i.useState(""),[p,f]=i.useState([]),[l,w]=i.useState(!0),k=B(),S=T(k.breakpoints.down("sm"));i.useEffect(()=>{(async()=>{try{const y=((await I.get("http://localhost:5000/api/bookings")).data.bookings||[]).filter(h=>h.status?.toLowerCase()==="pending"||h.paymentStatus?.toLowerCase()==="pending");f(y)}catch(t){console.error("Error fetching pending bookings:",t)}finally{w(!1)}})()},[]);const c=()=>u(!1),C=n=>m(n.target.value),d=p.filter(n=>n._id.includes(a)||(n.fullName||"").toLowerCase().includes(a.toLowerCase())||(n.emailAddress||"").toLowerCase().includes(a.toLowerCase()));return e.jsxs(D,{p:2,children:[e.jsx(x,{variant:"h4",gutterBottom:!0,children:"Pending Bookings"}),e.jsxs(v,{sx:{mt:2,width:"100%"},children:[e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(P,{label:"Search by Booking ID, Customer Name, Email",variant:"outlined",size:"small",value:a,onChange:C,sx:{maxWidth:{sm:300}}}),e.jsx(o,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(L,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(E,{stickyHeader:!0,children:[e.jsx(N,{children:e.jsxs(r,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Guests"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Payment Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(A,{children:[l&&e.jsx(r,{children:e.jsx(s,{colSpan:10,align:"center",children:"Loading..."})}),!l&&d.map((n,t)=>e.jsxs(r,{children:[e.jsx(s,{children:t+1}),e.jsx(s,{children:n._id}),e.jsx(s,{children:n.fullName}),e.jsx(s,{children:n.emailAddress}),e.jsx(s,{children:n.numberOfGuests}),e.jsx(s,{children:new Date(n.bookingDate).toLocaleDateString()}),e.jsx(s,{children:n.finalPrice}),e.jsx(s,{children:n.status}),e.jsx(s,{children:n.paymentStatus}),e.jsx(s,{children:e.jsxs(j,{direction:"row",spacing:1,children:[e.jsx(o,{variant:"outlined",size:"small",children:"View"}),e.jsx(o,{variant:"outlined",size:"small",children:"Download"})]})})]},n._id)),!l&&d.length===0&&e.jsx(r,{children:e.jsx(s,{colSpan:10,align:"center",children:"No Pending Bookings Found"})})]})]})})]}),e.jsxs(b,{open:g,onClose:c,maxWidth:"sm",fullWidth:!0,fullScreen:S,children:[e.jsx(W,{children:"Add New Pending Trip"}),e.jsx(_,{dividers:!0,children:e.jsx(x,{children:"This form is optional. You can remove it."})}),e.jsx(z,{children:e.jsx(o,{onClick:c,children:"Close"})})]})]})};export{O as default};
